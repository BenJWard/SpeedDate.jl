<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="Ward9250"> 
    <link rel="canonical" href="https://ward9250.github.io/SpeedDate.jl/man/cmdline/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Command Line - SpeedDate.jl</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/biojulia.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link rel="stylesheet" href="../../css/friendly.css" type="text/css">
    <link href="../../assets/Documenter.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">SpeedDate.jl</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Manual <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../intro/">Introduction</a>
</li>

                        
                            
<li >
    <a href="../install/">Installation</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Running SpeedDate</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">Command Line</a>
</li>

        
            
<li >
    <a href="../gtkgui/">GTK Gui</a>
</li>

        
            
<li >
    <a href="../injulia/">From julia</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../install/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../gtkgui/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/Ward9250/SpeedDate.jl">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
                <li><a href="https://biojulia.github.io">BioJulia Home</a></li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#running-speeddate-as-a-command-line-application">Running SpeedDate as a command line application</a></li>
        
    
        <li class="first-level "><a href="#computing-divergence-times">Computing divergence times</a></li>
        
            <li class="second-level"><a href="#entering-dna-sequences">Entering DNA sequences</a></li>
            
        
            <li class="second-level"><a href="#parameters-for-divergence-time-estimation">Parameters for divergence time estimation.</a></li>
            
        
            <li class="second-level"><a href="#extra-options">Extra options</a></li>
            
        
    
        <li class="first-level "><a href="#plotting-speeddate-results">Plotting SpeedDate results</a></li>
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<p><a id='Running-SpeedDate-as-a-command-line-application-1'></a></p>
<h1 id="running-speeddate-as-a-command-line-application">Running SpeedDate as a command line application</h1>
<p>SpeedDate can be started from the command line by invoking the following line in a terminal.</p>
<div class="codehilite"><pre><span></span>julia -e&quot;using SpeedDate; SpeedDate.main()&quot;
</pre></div>


<p><a id='Computing-divergence-times-1'></a></p>
<h1 id="computing-divergence-times">Computing divergence times</h1>
<p>The <code>compute</code> command is invoked to compute genetic distances and divergence times for an input aligned FASTA file.</p>
<p>Use the -h flag to display the possible options for the <code>compute</code> command:</p>
<div class="codehilite"><pre><span></span>julia -e&quot;using SpeedDate; SpeedDate.main()&quot; compute -h
usage: &lt;PROGRAM&gt; compute [-f FILE] [-s [DNASEQS...]] [-m MODEL]
                        [-r MUTATION_RATE] [--method METHOD]
                        [-o OUTFILE] [--scan] [-w WIDTH] [-c]
                        [--onlydist] [-h]

optional arguments:
  -f, --file FILE       An input file.
  -s, --dnaseqs [DNASEQS...]
                        The first of two DNA sequences to test (type:
                        Bio.Seq.BioSequence{Bio.Seq.DNAAlphabet{4}})
  -m, --model MODEL     The model used to compute genetic distances.
                        Currently jc69, and k80 are supported.
                        (default: &quot;jc69&quot;)
  -r, --mutation_rate MUTATION_RATE
                        The mutation rate to be assumed. (type:
                        Float64, default: 1.0e-8)
  --method METHOD       The dating method to use. Currently &#39;default&#39;
                        and &#39;simple&#39; are supported.  (default:
                        &quot;default&quot;)
  -o, --outfile OUTFILE
                        Base name for the output files(s). (default:
                        &quot;SpeedDate&quot;)
  --scan                Whether or not to compute dates across
                        sequences with a window.
  -w, --width WIDTH     Width of the window across sequences. (type:
                        Int64, default: 100)
  -c, --sepcol          Write the start and end points of sliding
                        windows in separate columns of output table.
  --onlydist
  -h, --help            show this help message and exit
</pre></div>


<p><a id='Entering-DNA-sequences-1'></a></p>
<h3 id="entering-dna-sequences">Entering DNA sequences</h3>
<p>You will see that you can enter DNA sequences either from a FASTA formatted file using the <code>-f</code> or <code>--file</code> flags. Alternatively short sequences can be typed out on the command line using the <code>-s</code> or <code>--dnaseqs</code> flags.</p>
<p><a id='Parameters-for-divergence-time-estimation.-1'></a></p>
<h3 id="parameters-for-divergence-time-estimation">Parameters for divergence time estimation.</h3>
<p>SpeedDate computes evolutionary distances between sequences (or windows of sequences if you are estimating divergence times using a sliding window - see below.), by default this is currently the Jukes &amp; Cantor 69 distance, but can be set to Kimura's 80 distance, by providing the option <code>-m k80</code> or <code>--model k80</code>. More estimates are anticipated in future versions.</p>
<p>SpeedDate requires a mutation rate to estimate divergence times, by default this is 1.0e-8, but may be altered by using the <code>-r</code> or <code>--mutation_rate</code> flag.</p>
<p>By default the SpeedDate method will be used which gives a 95% CI range for the divergence time, but a simpler estimate can be used which gives a single point estimate of the expected divergence time. To do this pass the flag option <code>--method simple</code>.</p>
<p>Use the <code>--scan</code> option flag to indicate you want to compute the divergence times for windows across your sequences. Set the size of the windows with the flag <code>-w</code>, e.g. <code>-w 1000</code>.</p>
<p>When you run SpeedDate a .csv file containing the evolutionary distance measures, and a .csv file containing the divergence time estimates between your sequences will be output. You can set the base name these output files with <code>--outfile</code> or <code>-o</code>.</p>
<p><a id='Extra-options-1'></a></p>
<h3 id="extra-options">Extra options</h3>
<p>If the flag <code>--onlydist</code> is used, then SpeedDate will only compute the evolutionary distance measures and output them to file. It will not go on to produce divergence time estimates.   </p>
<p><a id='Plotting-SpeedDate-results-1'></a></p>
<h1 id="plotting-speeddate-results">Plotting SpeedDate results</h1>
<p>The <code>compute</code> command will write out the results to file as a data-frame, in a text-based file format (csv). This format should be familiar to users of R and other software frameworks that use a similar tabular data structure.</p>
<p>The <code>plot</code> command is invoked to plot the results of a <code>compute</code> run. Of course the user can use whatever plotting solution they desire if they are happy scripting with the resulting data-frame files.</p>
<p>The plot command is very simple and will create simple heat plots using the <a href="http://gadflyjl.org/stable/">Gadfly.jl</a> framework.</p>
<p>The options available to the user for plotting can be viewed using the <code>-h</code> flag:</p>
<div class="codehilite"><pre><span></span>julia -e&quot;using SpeedDate; SpeedDate.main()&quot; plot -h

usage: &lt;PROGRAM&gt; plot [--width WIDTH] [--height HEIGHT]
                      [--units UNITS] [--backend BACKEND]
                      [--reference REFERENCE] [-h] [inputfile]
                      [outputfile]

positional arguments:
  inputfile             The file name of the input data.
  outputfile            The file name of the output plot.

optional arguments:
  --width WIDTH         Width of the plot. (type: Float64, default:
                        12.0)
  --height HEIGHT       Height of the plot. (type: Float64, default:
                        8.0)
  --units UNITS         Units for width and height of the plot.  Must
                        be one of &#39;inch&#39;, &#39;mm&#39;, or &#39;cm&#39;.  (default:
                        &quot;cm&quot;)
  --backend BACKEND     The backend used to produce the plot.  Must be
                        one of &#39;svg&#39;, &#39;svgjs&#39;, &#39;png&#39;, &#39;pdf&#39;, &#39;ps&#39;, or
                        &#39;pgf&#39;.  (default: &quot;svg&quot;)
  --reference REFERENCE
                        The name of the DNA sequence to use as a
                        reference when plotting a windowed analysis.
                        (default: &quot;default&quot;)
  --table               Save the table used for plotting to file.
  --sortsim             Sort the rows of the output table by average
                        sequence similarity if you are plotting a
                        windowed analysis.
  -h, --help            show this help message and exit.
</pre></div>


<p>The command is very simple, with two obligatory arguments: first the filename of a SpeedDate results file is provided, followed by a name for the output plot.</p>
<p>Optionally: You can set the width and the height of the generated plot with the flags <code>--width</code> and <code>--height</code>, and you can specify the units of the width and height (in mm, cm, or inches), with the <code>--units</code> flag. By default the units are in centimeters (cm).</p>
<p>You can choose which backend is used to save the plot (i.e. the file format) using the <code>--backend</code> flag. Most commonly you will want a vectorized format ("svg" or "pdf"), or a rasterized format ("png"). By default the plot will be drawn using an SVG backend.</p>
<p>Finally, if you are plotting results from a SpeedDate run which used a sliding window, then you can set the name of the sequence to use as the reference sequence, against which all other sequences are plotted. By default, this falls back to the first sequence name that is mentioned in the results file you give the plot command.</p>
<p>This command can plot distances or divergence times produced by SpeedDate. The divergence times plotted are the "middle estimates". Recall from the intro of this manual that SpeedDate makes upper, middle, and lower estimates of the divergence time, forming a 95% confidence interval in which the true age is estimated to lie.</p>
<p>An example usage is below. The input file is called "SpeedDate_distances.csv", the output plot is given the name "myplot", the plot is written out in PNG format, and the width and height of the plot are set to 50 and 45 cm.</p>
<div class="codehilite"><pre><span></span>julia -e&quot;using SpeedDate; SpeedDate.main()&quot; plot SpeedDate_distances.csv testplot --backend png --width 50.0 --height 45.0
</pre></div></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Copyright (c) 2016 Ben J. Ward<br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>
    <script>
        ((window.gitter = {}).chat = {}).options = {
            room: 'BioJulia/SpeedDate.jl'
        };
    </script>
    <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <script src="../../assets/mathjaxhelper.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
